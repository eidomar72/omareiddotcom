(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{513:function(e,t,r){"use strict";(function(e){r(102);var n=r(30),l=(r(14),r(11),r(61),r(578)),o=(r(9),r(8));t.a={nuxtI18n:{paths:{en:"/storelocator",fr:"/magasins",es:"/tiendas",pt:"/storelocator",ru:"/storelocator",ar:"/storelocator",cz:"/storelocator",ja:"/storelocator"}},layout:"no-scroll",asyncData:function(e){var t=e.store,r=e.error,l=e.app,o=e.query,c=e.params;return Promise.all([t.dispatch("fetchWPData",{context:l,type:"pos"})]).then((function(e){var data=Object(n.a)(e,1)[0],r=o.preview_id||o.p||!1;return r?Promise.all([t.dispatch("fetchWPData",{context:l,type:"pos",query:{slug:c.id},previewId:r,previewNonce:o.preview_nonce||!1})]).then((function(e){var t=Object(n.a)(e,1)[0];return new Promise((function(e){setTimeout((function(){e({data:data,previewStore:Array.isArray(t)?t[0]:t})}),400)}))})):new Promise((function(e){setTimeout((function(){e({data:data})}),400)}))})).catch((function(e){r({statusCode:404,message:"Page not found"})}))},head:function(){var title=this.$t("Store locator");return{title:"- ".concat(title),meta:[{hid:"og:title",property:"og:title",content:"Richard Mille - "+title},{hid:"og:url",property:"og:url",content:e.env.FRONT_PROTOCOL+"://"+e.env.FRONT_DOMAIN+this.$route.fullPath}]}},data:function(){return{result:!1,focus:!1,inputClicked:null,mapStyles:l,displaySingle:!1,hoveredMarker:!1,activeInfoWindow:!1,activeCountry:"default",activeCity:"default",activeType:"store",activeSlide:1,center:{lat:40.73061,lng:-73.935242},geolocation:!1,slickOptions:{arrows:!0,infinite:!0,slidesToShow:1,speed:900,swipeToSlide:!0,responsive:[{breakpoint:991}]}}},computed:{isPreview:function(){return this.$route.query.preview_id||this.$route.query.p},singleData:function(){if(this.isPreview)return this.previewStore;var e=this.$route.query.id;return e&&this.data.filter((function(t){return t.slug==e}))[0]||!1},filteredData:function(){var e=this,t=this.data.slice(0);return"default"!=this.activeCountry&&(t=t.filter((function(t){return t.acf.country==e.activeCountry}))),"default"!=this.activeCity&&(t=t.filter((function(t){return t.acf.city==e.activeCity}))),"default"!=this.activeType&&(t=t.filter((function(t){return t.acf.store_type.value==e.activeType}))),t=t.sort((function(a,b){return"store"==a.acf.store_type.value?-1:1}))},countries:function(){for(var e=[],i=0;i<this.data.length;i++)"default"!=this.activeType&&this.data[i].acf.store_type.value!=this.activeType||e.map((function(e){return e.label})).indexOf(this.data[i].acf.country)<0&&e.push({label:this.data[i].acf.country,value:this.data[i].acf.country});return e=e.sort((function(a,b){return a.label.localeCompare(b.label)}))},cities:function(){for(var e=[],i=0;i<this.data.length;i++)"default"!=this.activeType&&this.data[i].acf.store_type.value!=this.activeType||e.map((function(e){return e.label})).indexOf(this.data[i].acf.city)<0&&("default"!=this.activeCountry&&this.data[i].acf.country!==this.activeCountry||e.push({label:this.data[i].acf.city,value:this.data[i].acf.city}));return e=e.sort((function(a,b){return a.label.localeCompare(b.label)}))},typeStore:function(){for(var e=[],i=0;i<this.data.length;i++)e.map((function(e){return e.value})).indexOf(this.data[i].acf.store_type.value)<0&&e.push(this.data[i].acf.store_type);return e=e.sort((function(a,b){return a.label.localeCompare(b.label)}))}},watch:{activeCountry:function(){this.activeCity="default"},activeType:function(){this.activeCountry="default"},filteredData:function(){this.mapPanTo()},singleData:function(e){this.activeSlide=1}},mounted:function(){this.initGeolocation(),this.singleData&&this.enter()},methods:{initGeolocation:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var r={lat:t.coords.latitude,lng:t.coords.longitude};e.$refs.mapRef.$mapPromise.then((function(map){map.panTo(r),map.setZoom(12);var e={url:"/pin-geoloc2.svg",size:new google.maps.Size(8,8),scaledSize:new google.maps.Size(8,8),origin:new google.maps.Point(4,4)},t=(new google.maps.Marker({position:r,map:map,icon:e,optimized:!1,title:"bla"}),new google.maps.OverlayView);t.draw=function(){this.getPanes().markerLayer.id="markerLayer"},t.setMap(map)}))}),(function(){console.log("Geolocation : an error occured")})):console.log("Geolocation : browser doesn't support")},mapPanTo:function(){var e=this;this.$refs.mapRef.$mapPromise.then((function(map){if(e.filteredData){for(var t=new window.google.maps.LatLngBounds,i=0;i<e.filteredData.length;i++){var r=new window.google.maps.LatLng(e.filteredData[i].acf.position.lat,e.filteredData[i].acf.position.lng);t.extend(r)}map.fitBounds(t)}}))},next:function(){this.$refs.slick.next()},prev:function(){this.$refs.slick.prev()},handleAfterChange:function(e,t,r){this.activeSlide=r+1},beforeEnter:function(){if(this.$refs.single&&this.$refs.white){var e=this.$refs.single;this.$refs.white.style.transform="translateX(100%)",e.style.transform="translateX(100%)"}},enter:function(e,t){if(this.$refs.single&&this.$refs.white&&this.$refs.content&&this.$refs.search&&this.$el.querySelectorAll(".js-stagger")&&this.$el.querySelectorAll(".button__wrapper")&&window.innerWidth>991){var r=this.$refs.single,content=this.$refs.content,n=this.$refs.white,l=this.$refs.search,c=this.$el.querySelectorAll(".button__wrapper"),f=this.$el.querySelectorAll(".js-stagger"),v=new o.a;v.set(n,{alpha:1}),v.to(n,1.6,{x:"0",ease:Power3.easeOut}),v.set(n,{alpha:0}),v.to(r,1.6,{x:"0",ease:Power3.easeInOut},"-=2"),v.to(content,1.6,{x:"-72px",opacity:"1",ease:Power3.easeInOut},"-=2"),v.to(l,1,{alpha:0,ease:Power3.easeInOut},"-=2"),v.add("staggerItems","-=1.4"),v.call((function(){for(var i=0;i<c.length;i++)c[i].classList.add("active")}),null,null,"-=0.7"),v.staggerFromTo(f,.9,{y:20,alpha:0},{y:0,alpha:1,ease:Power4.easeOut,onComplete:t},.1,"staggerItems")}else if(window.innerWidth<=991&&this.$refs.single){var d=this.$refs.single;o.b.to(d,1,{x:"0",ease:Power3.easeInOut})}},leave:function(e,t){if(this.$refs.single&&this.$refs.white&&this.$refs.content&&this.$refs.search){var r=this.$refs.single,n=this.$refs.search,l=this.$refs.wrapper,c=this.$refs.white;o.b.to(n,1,{alpha:1,ease:Power3.easeInOut}),o.b.to(r,1,{x:"100%",ease:Power3.easeInOut}),o.b.to(c,1,{x:"100%",ease:Power3.easeInOut}),o.b.to(l,1,{x:"100%",ease:Power3.easeInOut}),t()}}}}}).call(this,r(129))},514:function(e,t,r){},578:function(e){e.exports=JSON.parse('[{"elementType":"geometry","stylers":[{"color":"#212121"}]},{"elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"elementType":"labels.text.stroke","stylers":[{"color":"#212121"}]},{"featureType":"administrative","elementType":"geometry","stylers":[{"color":"#757575"}]},{"featureType":"administrative.country","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]},{"featureType":"administrative.land_parcel","stylers":[{"visibility":"off"}]},{"featureType":"administrative.locality","elementType":"labels.text.fill","stylers":[{"color":"#bdbdbd"}]},{"featureType":"poi","elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#181818"}]},{"featureType":"poi.park","elementType":"labels.text.fill","stylers":[{"color":"#616161"}]},{"featureType":"poi.park","elementType":"labels.text.stroke","stylers":[{"color":"#1b1b1b"}]},{"featureType":"road","elementType":"geometry.fill","stylers":[{"color":"#2c2c2c"}]},{"featureType":"road","elementType":"labels.text.fill","stylers":[{"color":"#8a8a8a"}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#373737"}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"color":"#3c3c3c"}]},{"featureType":"road.highway.controlled_access","elementType":"geometry","stylers":[{"color":"#4e4e4e"}]},{"featureType":"road.local","elementType":"labels.text.fill","stylers":[{"color":"#616161"}]},{"featureType":"transit","elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"featureType":"water","elementType":"geometry","stylers":[{"color":"#000000"}]},{"featureType":"water","elementType":"labels.text.fill","stylers":[{"color":"#3d3d3d"}]}]')},579:function(e,t,r){"use strict";var n=r(514);r.n(n).a},631:function(e,t,r){"use strict";r.r(t);var n=r(513).a,l=(r(579),r(4)),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"store-locator"},[r("div",{staticClass:"map"},[r("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"100%"},attrs:{center:e.center,zoom:3,options:{styles:e.mapStyles,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,minZoom:3,maxZoom:13}}},[e._l(e.filteredData,(function(t,n){return[r("GmapMarker",{attrs:{icon:e.hoveredMarker==t.slug?"/pin-grey.svg":"retailer"==t.acf.store_type.value?"/pin-black.png":"/pin-white.png",position:{lat:parseFloat(t.acf.position.lat),lng:parseFloat(t.acf.position.lng)},zIndex:2},on:{click:function(r){e.$router.push(e.localePath({name:"storelocator",query:{id:t.slug}}))}}})]}))],2)],1),e._v(" "),r("div",{ref:"search",staticClass:"search",class:e.singleData?"inactive":""},[r("div",{staticClass:"search__block"},[r("c-select",{attrs:{label:e.$t("All"),list:e.typeStore},model:{value:e.activeType,callback:function(t){e.activeType=t},expression:"activeType"}}),e._v(" "),r("c-select",{attrs:{label:e.$t("Country or Region"),list:e.countries},model:{value:e.activeCountry,callback:function(t){e.activeCountry=t},expression:"activeCountry"}}),e._v(" "),r("c-select",{directives:[{name:"show",rawName:"v-show",value:"default"!==e.activeCountry,expression:"activeCountry !== 'default'"}],attrs:{label:e.$t("City"),list:e.cities},model:{value:e.activeCity,callback:function(t){e.activeCity=t},expression:"activeCity"}})],1),e._v(" "),r("transition",{attrs:{name:"appear2"}},[e.data&&"default"!==e.activeCountry?r("div",{staticClass:"search__results"},[r("div",{directives:[{name:"bar",rawName:"v-bar"}],staticClass:"scroll"},[r("div",[r("div",e._l(e.filteredData,(function(t,n){return r("nuxt-link",{key:n,staticClass:"search__result",attrs:{to:e.localePath({name:"storelocator",query:{id:t.slug}})},nativeOn:{mouseenter:function(r){e.hoveredMarker=t.slug},mouseleave:function(t){e.hoveredMarker=!1}}},[r("div",{staticClass:"search__background"}),e._v(" "),r("div",{staticClass:"text"},[r("div",{staticClass:"name"},[e._v(e._s(t.acf.name))]),e._v(" "),r("div",{domProps:{innerHTML:e._s(t.acf.address)}}),e._v(" "),r("span",{staticClass:"country"},[e._v(e._s(t.acf.country))])])])})),1)])])]):e._e()])],1),e._v(" "),r("h1",{staticClass:"title title--h2"},[e._v("Store locator")]),e._v(" "),r("nuxt-link",{staticClass:"background-single",class:{active:e.singleData},attrs:{to:e.localePath({name:"storelocator"})}},[r("div",{staticClass:"return"},[r("div",{staticClass:"return__title"},[e._v(e._s(e.$t("Back to the store list")))]),e._v(" "),r("div",{staticClass:"icon-wrap"},[r("span",{staticClass:"icon icon-down"})])])]),e._v(" "),r("transition",{attrs:{css:!1},on:{"before-enter":e.beforeEnter,enter:e.enter,leave:e.leave}},[e.singleData?r("div",{key:e.singleData.id,ref:"wrapper",staticClass:"single__wrapper"},[r("div",{ref:"white",staticClass:"single__white"}),e._v(" "),r("div",{ref:"single",staticClass:"single"},[r("div",{staticClass:"gradient"}),e._v(" "),e.singleData.acf.images?r("div",{staticClass:"single__slider"},[e.singleData.acf.images?r("slick",{key:"slick"+e.singleData.id,ref:"slick",staticClass:"slider",attrs:{options:e.slickOptions},on:{afterChange:e.handleAfterChange}},e._l(e.singleData.acf.images,(function(image){return r("div",[r("img",{attrs:{src:image.url,alt:""}})])})),0):e._e(),e._v(" "),e.singleData.acf.images.length>1?r("div",{ref:"nav",staticClass:"single__nav--mobile"},[r("button",{staticClass:"nav--prev icon-previous",on:{click:e.prev}}),e._v(" "),r("button",{staticClass:"nav--next icon-next",on:{click:e.next}})]):e._e()],1):e._e(),e._v(" "),r("div",{ref:"content",staticClass:"single__content"},[r("div",[r("div",{staticClass:"title--h3 js-stagger"},[e._v(e._s(e.singleData.acf.name))]),e._v(" "),e.singleData.acf.address?r("p",{staticClass:"headline js-stagger",domProps:{innerHTML:e._s(e.singleData.acf.address)}}):e._e()]),e._v(" "),r("div",{staticClass:"single__bottom"},[e.singleData.acf.images&&e.singleData.acf.images.length>1?r("div",{ref:"nav",staticClass:"single__nav js-stagger"},[r("button",{staticClass:"nav--prev icon-previous",on:{click:e.prev}}),e._v(" "),r("div",{staticClass:"title--h4 paging"},[r("span",[e._v(e._s(e.activeSlide))]),e._v(" "),r("div",{staticClass:"bar"}),e._v(" "),r("span",[e._v(e._s(e.singleData.acf.images.length))])]),e._v(" "),r("button",{staticClass:"nav--next icon-next",on:{click:e.next}})]):e._e(),e._v(" "),r("div",{staticClass:"single__buttons"},[e.singleData.acf.position.address&&""!=e.singleData.acf.position.address?r("c-button",{staticClass:"js-stagger",attrs:{type:"title",link:"https://maps.google.com?saddr=Current+Location&daddr="+e.singleData.acf.position.address,value:e.$t("Locate"),target:"desktop"==e.deviceType?"_blank":"_self"}}):e._e(),e._v(" "),e.singleData.acf.email?r("c-button",{staticClass:"js-stagger",attrs:{type:"title",link:"mailto:"+e.singleData.acf.email,value:e.$t("Send an email")}}):e._e(),e._v(" "),e.singleData.acf.phone?r("c-button",{staticClass:"js-stagger",attrs:{type:"title",link:"tel:"+e.singleData.acf.phone,value:"tel: "+e.singleData.acf.phone}}):e._e()],1),e._v(" "),e.singleData.acf.opening_hours?r("div",{staticClass:"text js-stagger"},[e._v(e._s(e.$t("Opening hours"))+": "),r("span",{domProps:{innerHTML:e._s(e.singleData.acf.opening_hours)}})]):e._e()])])])]):e._e()]),e._v(" "),r("nuxt-link",{directives:[{name:"show",rawName:"v-show",value:"mobile"==e.deviceType,expression:"deviceType == 'mobile'"}],staticClass:"close",class:{active:e.singleData},attrs:{to:e.localePath({name:"storelocator"})}},[r("div",{staticClass:"return"},[r("div",{staticClass:"return__title"},[e._v(e._s(e.$t("Back to the store list")))]),e._v(" "),r("div",{staticClass:"icon-wrap"},[r("span",{staticClass:"icon icon-down"})])])])],1)}),[],!1,null,"38fdd722",null);t.default=component.exports}}]);